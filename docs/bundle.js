(()=>{"use strict";var e={662:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserPlatform=void 0;const s=n(656),a=n(509),d=n(290),i=n(593),r=n(196);t.BrowserPlatform=class{manager=new a.StudentManager(new r.ServerManager);constructor(){this.setup(),this.createSelectOption(),(0,i.getElementById)("createButton").addEventListener("click",this.handleCreateStudentClick.bind(this)),(0,i.getElementById)("deleteButton").addEventListener("click",this.handleDeleteStudentClick.bind(this)),(0,i.getElementById)("updateButton").addEventListener("click",this.handleUpdateStudentClick.bind(this)),(0,i.getElementById)("showStudentCreate").addEventListener("click",this.showStudentCreate.bind(this)),(0,i.getElementById)("showStudentDelete").addEventListener("click",this.showStudentDelete.bind(this)),(0,i.getElementById)("showStudentUpdate").addEventListener("click",this.showStudentUpdate.bind(this)),(0,i.getElementById)("updateData").addEventListener("click",this.onChange.bind(this))}async setup(){await this.manager.setup(),this.createTable()}createStudent(){const e=(0,i.getElementById)("Name").value,t=(0,i.getElementById)("Surname").value,n=(0,i.getElementById)("Birthday").value,s=(0,i.getElementById)("Group").value;let a=Number(s);this.manager.createStudent(e,t,n,a),d.ToastManager.instance.showSuccessMessage("Students create",{delay:3e3,isButtonVisible:!0})}deleteStudent(){const e=(0,i.getElementById)("deleteId").value;let t=Number(e);!0===this.manager.deleteStudent(t)?d.ToastManager.instance.showSuccessMessage("Student is deleted",{delay:3e3,isButtonVisible:!0}):d.ToastManager.instance.showErrorMessage("Student is not deleted",{delay:3e3,isButtonVisible:!0})}updateStudent(){const e=(0,i.getElementById)("updateId").value,t=(0,i.getElementById)("updateData").value,n=(0,i.getElementById)("enterChanges").value;let s=Number(e);!0===this.manager.updateStudent(s,t,n)?d.ToastManager.instance.showSuccessMessage("Student update",{delay:3e3,isButtonVisible:!0}):d.ToastManager.instance.showErrorMessage("Student is not update",{delay:3e3,isButtonVisible:!0})}createTable(){let e=document.querySelector("tbody");e.innerHTML="";for(let t=0;t<this.manager.students.length;t++){let n=document.createElement("tr"),s=this.manager.students[t];n.innerHTML="<td>"+s.id+"</td><td>"+s.name+"</td><td>"+s.surname+"</td><td>"+s.birthday+"</td><td>"+s.group+"</td>",e.appendChild(n)}}createSelectOption(){const e=[new s.Student(0,"Bob","Anderson","2000-02-01",1)],t=document.getElementById("updateData");for(let n in e[0]){if("id"==n)continue;let e=new Option(n);t.options.add(e)}}onChange(){let e=document.getElementById("updateData");if(null==e)throw new Error("id not found");"birthday"==e.options[e.selectedIndex].text?((0,i.getElementById)("enterChanges").type="date",(0,i.getElementById)("enterChanges").classList.add("input-date")):(0,i.getElementById)("enterChanges").type="text"}checkInput(e){const t=(0,i.getElementById)(e).value;return/^[A-zА-я]+$/gi.test(t)}checkInputNumber(e){const t=(0,i.getElementById)(e).value;return/[0-9]/gi.test(t)}checkInputDate(e){const t=(0,i.getElementById)(e).value;return/^(?:\d{4})-(?:\d{2})-(?:\d{2})$/.test(t)}checkInputCreate(){const e=this.checkInput("Name"),t=this.checkInput("Surname"),n=this.checkInputDate("Birthday"),s=this.checkInputNumber("Group");return 0!=e&&0!=t&&0!=n&&0!=s||(0==e&&d.ToastManager.instance.showWarningMessage("Name is incorrect",{delay:3e3,isButtonVisible:!0}),0==t&&d.ToastManager.instance.showWarningMessage("Surname is incorrect",{delay:3e3,isButtonVisible:!0}),0==n&&d.ToastManager.instance.showWarningMessage("Birthday is incorrect",{delay:3e3,isButtonVisible:!0}),0==s&&d.ToastManager.instance.showWarningMessage("Group is incorrect",{delay:3e3,isButtonVisible:!0}),!1)}checkInputDelete(){return 0!=this.checkInputNumber("deleteId")||(d.ToastManager.instance.showWarningMessage("id is incorrect",{delay:3e3,isButtonVisible:!0}),!1)}checkInputUpdate(){const e=this.checkInputNumber("updateId"),t=this.checkSelect();return 0!=e&&0!=t||(0==e&&d.ToastManager.instance.showWarningMessage("id is incorrect",{delay:3e3,isButtonVisible:!0}),0==t&&d.ToastManager.instance.showWarningMessage("Value is incorrect",{delay:3e3,isButtonVisible:!0}),!1)}checkSelect(){let e=document.getElementById("updateData");if(null==e)throw new Error("id not found");let t=e.options[e.selectedIndex].text;return"group"==t?this.checkInputNumber("enterChanges"):"birthday"==t?this.checkInputDate("enterChanges"):this.checkInput("enterChanges")}handleCreateStudentClick(){1==this.checkInputCreate()&&(this.createStudent(),this.hideStudentCreate(),this.createTable())}handleDeleteStudentClick(){1==this.checkInputDelete()&&(this.deleteStudent(),this.hideStudentDelete(),this.createTable())}handleUpdateStudentClick(){1==this.checkInputUpdate()&&(this.updateStudent(),this.hideStudentUpdate(),this.createTable())}showStudentCreate(){this.hideStudentDelete(),this.hideStudentUpdate(),document.getElementsByClassName("inputLine")[0].style.display="flex"}hideStudentCreate(){document.getElementsByClassName("inputLine")[0].style.display="none"}showStudentDelete(){this.hideStudentCreate(),this.hideStudentUpdate(),document.getElementsByClassName("delete")[0].style.display="flex"}hideStudentDelete(){document.getElementsByClassName("delete")[0].style.display="none"}showStudentUpdate(){this.hideStudentCreate(),this.hideStudentDelete(),document.getElementsByClassName("update")[0].style.display="flex"}hideStudentUpdate(){document.getElementsByClassName("update")[0].style.display="none"}}},196:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServerManager=void 0;const s=n(656);t.ServerManager=class{convertJsonToStudents(e){let t=e,n=[];for(let e=0;e<t.length;e++){const a=new s.Student(t[e].id,t[e].name,t[e].surname,t[e].birthday,t[e].group);n.push(a)}return n}async getStudents(){let e=await fetch("http://localhost:3000/students");if(e.ok){let t=await e.json(),n=this.convertJsonToStudents(t);return Promise.resolve(n)}return Promise.resolve([])}async createStudent(e){let t=await fetch("http://localhost:3000/students/create",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}),n=await t.json();return Promise.resolve(n)}async deleteStudent(e){let t=await fetch("http://localhost:3000/students/delete",{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}),n=await t.json();return Promise.resolve(n)}async updateStudent(e,t,n){let s={student:e,property:t,valueProperty:n},a=await fetch("http://localhost:3000/students/change",{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(s)}),d=await a.json();return Promise.resolve(d)}}},656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Student=void 0,t.Student=class{id;name;surname;birthday;group;constructor(e,t,n,s,a){this.id=e,this.name=t,this.surname=n,this.birthday=s,this.group=a}}},509:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StudentManager=void 0;const s=n(656);t.StudentManager=class{constructor(e){this._storage=e}_students=[new s.Student(0,"Bob","Ann","2000-02-01",1)];get students(){return this._students}_storage=null;get storage(){if(null===this._storage)throw new Error("storage not found");return this._storage}async setup(){this._students=await this.storage.getStudents()}createStudent(e,t,n,a){const d=this.createId(),i=new s.Student(d,e,t,n,a);let r=this.storage.createStudent(i);1==Boolean(r)&&this.students.push(i)}deleteStudent(e){const t=this.students.find((t=>t.id===e));if(void 0!==t){const n=this.students.findIndex((t=>t.id===e));let s=this.storage.deleteStudent(t);return!0===Boolean(s)&&this.students.splice(n,1),!0}return!1}updateStudent(e,t,n){const s=this.students.find((t=>t.id===e));if(void 0!==s){let e=this.storage.updateStudent(s,t,n);if(1==Boolean(e))switch(t){case"name":case"surname":case"birthday":case"group":s[t]=n}return!0}return!1}createId(){let e=10;for(let t=1;t<this.students.length+2;t++)null==this.students.find((e=>e.id==t))&&(e=t);return e}}},290:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToastManager=void 0;class n{static _instance;static get instance(){return void 0===this._instance&&(this._instance=new n),this._instance}constructor(){}showMessage(e,t,n,s){const a=document.createElement("div");a.innerHTML=e,a.classList.add("toast"),a.classList.add(s);const d=document.createElement("button");let i="visible";i=1==n?"visible":"hidden",d.style.visibility=i,d.classList.add("btn"),d.classList.add("btn-clear"),d.classList.add("float-right"),a.appendChild(d),document.body.prepend(a),setTimeout((()=>a.remove()),t),d.onclick=function(){a.remove()}}showSuccessMessage(e,t){this.showMessage(e,t.delay,t.isButtonVisible,"toast-success")}showErrorMessage(e,t){this.showMessage(e,t.delay,t.isButtonVisible,"toast-error")}showWarningMessage(e,t){this.showMessage(e,t.delay,t.isButtonVisible,"toast-warning")}}t.ToastManager=n},593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getElementById=void 0,t.getElementById=function(e){const t=document.getElementById(e);if(null==t)throw new Error("id not found");return t}}},t={};new(function n(s){var a=t[s];if(void 0!==a)return a.exports;var d=t[s]={exports:{}};return e[s](d,d.exports,n),d.exports}(662).BrowserPlatform)})();