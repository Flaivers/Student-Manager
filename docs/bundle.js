(()=>{"use strict";var e={621:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserPlatform=void 0;const n=s(919),a=s(665),d=s(593),i=s(876);t.BrowserPlatform=class{manager=new n.StudentManager(new i.StudentsLocalStorage);constructor(){this.setup(),(0,d.getElementById)("createButton").addEventListener("click",this.handleCreateStudentClick.bind(this)),(0,d.getElementById)("deleteButton").addEventListener("click",this.handleDeleteStudentClick.bind(this)),(0,d.getElementById)("updateButton").addEventListener("click",this.handleUpdateStudentClick.bind(this)),(0,d.getElementById)("showStudentCreate").addEventListener("click",this.showStudentCreate.bind(this)),(0,d.getElementById)("showStudentDelete").addEventListener("click",this.showStudentDelete.bind(this)),(0,d.getElementById)("showStudentUpdate").addEventListener("click",this.showStudentUpdate.bind(this))}async setup(){await this.manager.setup(),this.createTable()}createStudent(){const e=(0,d.getElementById)("Name").value,t=(0,d.getElementById)("Surname").value,s=(0,d.getElementById)("Birthday").value,n=(0,d.getElementById)("Group").value;let i=Number(s),r=Number(n);this.manager.createStudent(e,t,i,r),a.ToastManager.instance.showSuccessMessage("Students create",{delay:3e3,isButtonVisible:!0})}deleteStudent(){const e=(0,d.getElementById)("deleteSurname").value;!0===this.manager.deleteStudent(e)?a.ToastManager.instance.showSuccessMessage("Student is deleted",{delay:3e3,isButtonVisible:!0}):a.ToastManager.instance.showErrorMessage("Student is not deleted",{delay:3e3,isButtonVisible:!0})}updateStudent(){const e=(0,d.getElementById)("updateSurname").value,t=(0,d.getElementById)("updateData").value,s=(0,d.getElementById)("enterChanges").value;!0===this.manager.updateStudent(e,t,s)?a.ToastManager.instance.showSuccessMessage("Student update",{delay:3e3,isButtonVisible:!0}):a.ToastManager.instance.showErrorMessage("Student is not update",{delay:3e3,isButtonVisible:!0})}createTable(){let e=document.querySelector("tbody");e.innerHTML="";for(let t=0;t<this.manager.students.length;t++){let s=document.createElement("tr"),n=this.manager.students[t];s.innerHTML="<td>"+n.name+"</td><td>"+n.surname+"</td><td>"+n.birthday+"</td><td>"+n.group+"</td>",e.appendChild(s)}}handleCreateStudentClick(){this.createStudent(),this.hideStudentCreate(),this.createTable()}handleDeleteStudentClick(){this.deleteStudent(),this.hideStudentDelete(),this.createTable()}handleUpdateStudentClick(){this.updateStudent(),this.hideStudentUpdate(),this.createTable()}showStudentCreate(){this.hideStudentDelete(),this.hideStudentUpdate(),document.getElementsByClassName("inputLine")[0].style.display="flex"}hideStudentCreate(){document.getElementsByClassName("inputLine")[0].style.display="none"}showStudentDelete(){this.hideStudentCreate(),this.hideStudentUpdate(),document.getElementsByClassName("delete")[0].style.display="flex"}hideStudentDelete(){document.getElementsByClassName("delete")[0].style.display="none"}showStudentUpdate(){this.hideStudentCreate(),this.hideStudentDelete(),document.getElementsByClassName("update")[0].style.display="flex"}hideStudentUpdate(){document.getElementsByClassName("update")[0].style.display="none"}}},1:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBrowserStorage=void 0;const n=s(253);t.BaseBrowserStorage=class{_key="test";getStudents(){let e=this.getStorage().getItem(this._key);if(""!==e&&null!==e){let t=JSON.parse(e),s=[];for(let e=0;e<t.length;e++){const a=new n.Student(t[e].name,t[e].surname,t[e].birthday,t[e].group);s.push(a)}return Promise.resolve(s)}return Promise.resolve([])}saveStudents(e){this.getStorage().setItem(this._key,JSON.stringify(e))}getStorage(){return sessionStorage}}},876:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StudentsLocalStorage=void 0;const n=s(1);class a extends n.BaseBrowserStorage{getStudents(){return Promise.resolve(super.getStudents())}saveStudents(e){super.saveStudents(e)}getStorage(){return localStorage}}t.StudentsLocalStorage=a},253:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Student=void 0,t.Student=class{name;surname;birthday;group;constructor(e,t,s,n){this.name=e,this.surname=t,this.birthday=s,this.group=n}}},919:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StudentManager=void 0;const n=s(253),a=s(876);t.StudentManager=class{constructor(e){this._storage=e}_students=[new n.Student("Bob","Ann",2e3,1)];get students(){return this._students}_storage=new a.StudentsLocalStorage;async setup(){this._students=await this._storage.getStudents()}createStudent(e,t,s,a){const d=new n.Student(e,t,s,a);this.students.push(d),this._storage.saveStudents(this.students)}deleteStudent(e){if(void 0!==this.students.find((t=>t.surname===e))){const t=this.students.findIndex((t=>t.surname===e));return this.students.splice(t,1),this._storage.saveStudents(this.students),!0}return!1}updateStudent(e,t,s){const n=this.students.find((t=>t.surname===e));if(void 0!==n){switch(t){case"name":case"surname":case"birthday":case"group":n[t]=s}return this._storage.saveStudents(this.students),!0}return!1}}},665:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToastManager=void 0;class s{static _instance;static get instance(){return void 0===this._instance&&(this._instance=new s),this._instance}constructor(){}showMessage(e,t,s,n){const a=document.createElement("div");a.innerHTML=e,a.classList.add("toast"),a.classList.add(n);const d=document.createElement("button");let i="visible";i=1==s?"visible":"hidden",d.style.visibility=i,d.classList.add("btn"),d.classList.add("btn-clear"),d.classList.add("float-right"),a.appendChild(d),document.body.prepend(a),setTimeout((()=>a.remove()),t),d.onclick=function(){a.remove()}}showSuccessMessage(e,t){this.showMessage(e,t.delay,t.isButtonVisible,"toast-success")}showErrorMessage(e,t){this.showMessage(e,t.delay,t.isButtonVisible,"toast-error")}}t.ToastManager=s},593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getElementById=void 0,t.getElementById=function(e){const t=document.getElementById(e);if(null==t)throw new Error("id not found");return t}}},t={};new(function s(n){var a=t[n];if(void 0!==a)return a.exports;var d=t[n]={exports:{}};return e[n](d,d.exports,s),d.exports}(621).BrowserPlatform)})();